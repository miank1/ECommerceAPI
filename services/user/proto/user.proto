syntax = "proto3";

package user;

option go_package = "ecommerce-api/services/user/proto";

import "google/protobuf/timestamp.proto";

// User service definition
service UserService {
    // Authentication methods
    rpc Register(RegisterRequest) returns (UserResponse) {}
    rpc Login(LoginRequest) returns (LoginResponse) {}
    rpc ValidateToken(ValidateTokenRequest) returns (ValidateTokenResponse) {}
    
    // User profile methods
    rpc GetProfile(GetProfileRequest) returns (UserResponse) {}
    rpc UpdateProfile(UpdateProfileRequest) returns (UserResponse) {}
}

// User message represents a user in the system
message User {
    string id = 1;
    string email = 2;
    string name = 3;
    google.protobuf.Timestamp created_at = 4;
    google.protobuf.Timestamp updated_at = 5;
}

// Register request message
message RegisterRequest {
    string email = 1;
    string password = 2;
    string name = 3;
}

// Login request message
message LoginRequest {
    string email = 1;
    string password = 2;
}

// Login response message
message LoginResponse {
    string token = 1;
    User user = 2;
    string message = 3;
}

// User response message
message UserResponse {
    User user = 1;
    string message = 2;
}

// Validate token request
message ValidateTokenRequest {
    string token = 1;
}

// Validate token response
message ValidateTokenResponse {
    bool valid = 1;
    string user_id = 2;
    string email = 3;
    string error = 4;
}

// Get profile request
message GetProfileRequest {
    string user_id = 1;
}

// Update profile request
message UpdateProfileRequest {
    string user_id = 1;
    string name = 2;
    string email = 3;
}
